<div class="container">
	<h1>The secret fairy admin page! 🌸🎉🍣</h1>
	<mat-tab-group animationDuration="0" dynamicHeight>
		<mat-tab label="All users">
			<br />
			<button mat-flat-button (click)="fetchUsers()">
				<mat-icon>refresh</mat-icon> Refresh
			</button>

			<table mat-table [dataSource]="users" style="width: 100%;">
				<ng-container matColumnDef="image">
					<th mat-header-cell *matHeaderCellDef></th>
					<td mat-cell *matCellDef="let element">
						<img
							class="user-image"
							src="/api/user/{{ element.username }}/image"
						/>
					</td>
				</ng-container>

				<ng-container matColumnDef="username">
					<th mat-header-cell *matHeaderCellDef>Username</th>
					<td mat-cell *matCellDef="let element">
						{{ element.username }}
					</td>
				</ng-container>

				<ng-container matColumnDef="email">
					<th mat-header-cell *matHeaderCellDef>Email</th>
					<td mat-cell *matCellDef="let element">
						{{ element.email }}
					</td>
				</ng-container>

				<ng-container matColumnDef="minutes">
					<th mat-header-cell *matHeaderCellDef>Minutes</th>
					<td mat-cell *matCellDef="let element">
						{{ element.minutes }}
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="usersCols"></tr>
				<tr mat-row *matRowDef="let row; columns: usersCols"></tr>
			</table>
		</mat-tab>
		<mat-tab label="Online users">
			<br />
			<button mat-flat-button (click)="fetchOnlineUsers()">
				<mat-icon>refresh</mat-icon> Refresh
			</button>

			<table mat-table [dataSource]="onlineUsers" style="width: 100%;">
				<ng-container matColumnDef="image">
					<th mat-header-cell *matHeaderCellDef></th>
					<td mat-cell *matCellDef="let element">
						<img
							class="user-image"
							src="/api/user/{{ element.username }}/image"
						/>
					</td>
				</ng-container>

				<ng-container matColumnDef="username">
					<th mat-header-cell *matHeaderCellDef>Username</th>
					<td mat-cell *matCellDef="let element">
						{{ element.username }}
					</td>
				</ng-container>

				<ng-container matColumnDef="minutes">
					<th mat-header-cell *matHeaderCellDef>Minutes online</th>
					<td mat-cell *matCellDef="let element">
						{{ element.minutes }}
					</td>
				</ng-container>

				<ng-container matColumnDef="location">
					<th mat-header-cell *matHeaderCellDef>Location</th>
					<td mat-cell *matCellDef="let element">
						{{
							"hifi://" +
								element.location.network_address +
								":" +
								element.location.network_port
						}}
					</td>
				</ng-container>

				<ng-container matColumnDef="id">
					<th mat-header-cell *matHeaderCellDef>Session ID</th>
					<td mat-cell *matCellDef="let element">
						{{ element.id }}
					</td>
				</ng-container>

				<tr mat-header-row *matHeaderRowDef="onlineUsersCols"></tr>
				<tr mat-row *matRowDef="let row; columns: onlineUsersCols"></tr>
			</table>
		</mat-tab>
	</mat-tab-group>
</div>
